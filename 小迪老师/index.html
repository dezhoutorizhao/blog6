<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="CTF web手、Golang后端开发工程师 研究多线程高并发、渗透测试      Web安全">
    

    <!--Author-->
    
        <meta name="author" content="h3110w0r1d">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="小迪老师信息收集"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="CTF web手、Golang后端开发工程师 研究多线程高并发、渗透测试      Web安全" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="h3110w0r1d&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    
        <meta name="twitter:card" content="summary" />
    
    
    

    <!-- Title -->
    
    <title>小迪老师信息收集 - h3110w0r1d&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Google Analytics -->
    


<meta name="generator" content="Hexo 5.4.0"></head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/%E5%B0%8F%E8%BF%AA%E8%80%81%E5%B8%88/">
                小迪老师信息收集
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-07-06</span>
            
            
                <a href="#disqus_thread" class="comments">留言</a>
            
            
                <span class="category">
                    <a href="/categories/CTF/">CTF</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <h1 id="概念名词"><a href="#概念名词" class="headerlink" title="概念名词"></a>概念名词</h1><h2 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h2><ol>
<li>网站地址的名称</li>
<li>注册：在第三方平台注册，万网（被阿里云收购）<h3 id="二级域名，多级域名"><a href="#二级域名，多级域名" class="headerlink" title="二级域名，多级域名"></a>二级域名，多级域名</h3></li>
<li>www是顶级域名，域名有几个点就算几个域名，一级域名只有一个点，往往由与品牌高度相关的主域名和后缀组成</li>
<li>二级域名，是一级域名的子域名，是企业根据不同的业务场景进行的拓展</li>
<li>一级域名和二级域名区别：二级域名依附于一级域名而存在吗，没有一级域名，就不存在二级域名，如果不作二级域名，一级域名则不会受到影响。</li>
<li>处罚连带不同，一级域名被处罚，二级域名也会被处罚；二级域名被处罚时，一级域名则不会受到影响。</li>
<li>以example.cn这个一级域名为例，我们在设置解析记录时，将主机记录值设置为“www”，然后指向IP为192.168.1.1，那么我们访问<a target="_blank" rel="noopener" href="http://www.example.cn,就会跳转到192.168.1.1这个站点;如果我们将主机值设置为“mail”,然后将ip指向192.168.2.2,那么我们访问mail.example.cn就会跳转到192.168.2.2这个站点./">www.example.cn，就会跳转到192.168.1.1这个站点；如果我们将主机值设置为“mail”，然后将IP指向192.168.2.2，那么我们访问mail.example.cn就会跳转到192.168.2.2这个站点。</a><h4 id="域名分类"><a href="#域名分类" class="headerlink" title="域名分类"></a>域名分类</h4></li>
<li>国家级和地区级顶级域名</li>
<li>一级域名</li>
<li>二级域名</li>
</ol>
<h2 id="域名发现对渗透测试的意义"><a href="#域名发现对渗透测试的意义" class="headerlink" title="域名发现对渗透测试的意义"></a>域名发现对渗透测试的意义</h2><ol>
<li>不同的多级域名包含的信息不同，例如<a target="_blank" rel="noopener" href="http://www.xxx.com/">www.xxx.com</a> 和jw.xxx.com的网页信息可能不同，可以多个尝试</li>
<li>多级域名是给与了多个可能性</li>
</ol>
<h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><ol>
<li>域名系统服务协议</li>
<li>用于域名和IP地址的相互转换</li>
<li>网页搭建的时候是将IP解析到指定域名下</li>
</ol>
<h3 id="本地hosts和dns的关系"><a href="#本地hosts和dns的关系" class="headerlink" title="本地hosts和dns的关系"></a>本地hosts和dns的关系</h3><ol>
<li>ping的时候，先从本地hosts文件下找对应的域名对应的IP，并ping这个IP</li>
<li>如果没有，则到互联网的DNS服务器中找</li>
<li>目的：如果当绑定IP地址绑定到指定域名下时</li>
<li>在对方访问的时候，令对方访问到你指定的IP地址中去</li>
<li>如果能修改对方的hosts文件，修改一个对方需要访问的域名对应的IP，对方仍使用这个域名的时候就可以访问到自己写的网站，从而构成钓鱼链接</li>
</ol>
<h3 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h3><ol>
<li>网络协议</li>
<li>内容分布网络，节点技术</li>
<li>在访问的时候，会自动匹配到速度较好的服务器，而这个服务器被叫做节点</li>
<li>在访问网站的真实数据的时候，访问的节点上的缓存，而不是网站的真实数据</li>
<li>扫描网站的时候，访问的是缓存，而不是真正的网站数据，是没有任何意义的</li>
</ol>
<h3 id="刷新dns缓存命令-windows"><a href="#刷新dns缓存命令-windows" class="headerlink" title="刷新dns缓存命令(windows)"></a>刷新dns缓存命令(windows)</h3><ol>
<li>ipconfig /flushdns</li>
</ol>
<h3 id="DNS攻击"><a href="#DNS攻击" class="headerlink" title="DNS攻击"></a>DNS攻击</h3><ol>
<li>dns劫持等</li>
<li>导致大量用户访问网站的时候被<strong>恶意解析</strong>，<strong>访问到其它的IP</strong></li>
<li>每个地区解析的地址不一样，对应的DNS服务器地址不一样，被黑对应的一部分服务器，对应的就是一部分地区的用户，所以LINUX老师在上课的时候说现在网络安全性很好，没有<strong>大范围的网络瘫痪</strong></li>
</ol>
<h2 id="脚本语言"><a href="#脚本语言" class="headerlink" title="脚本语言"></a>脚本语言</h2><ol>
<li>网站源码有多种脚本语言编写，常见<strong>php</strong> <strong>javaweb</strong>,asp aspx jsp pi <strong>py</strong> cgi<h3 id="不同脚本类型和安全漏洞的关系"><a href="#不同脚本类型和安全漏洞的关系" class="headerlink" title="不同脚本类型和安全漏洞的关系"></a>不同脚本类型和安全漏洞的关系</h3></li>
<li>如果语言严谨，注重发展比较多，发展时间长，安全性漏洞性高</li>
<li>所以开发用安全语言</li>
<li>php用于小众网站，java用于大众网站</li>
</ol>
<h2 id="后门"><a href="#后门" class="headerlink" title="后门"></a>后门</h2><ol>
<li>攻击者通常会留一个后门文件，便于下一次获得权限，webshell</li>
<li>远控木马等的通称，是一个泛称</li>
</ol>
<h3 id="后门在安全测试中的意义"><a href="#后门在安全测试中的意义" class="headerlink" title="后门在安全测试中的意义"></a>后门在安全测试中的意义</h3><ol>
<li>便于下一次方便地获取权限进系统</li>
<li>获取到相关权限，类似一个管道，操作这台服务区需要一个东西链接上去，这个东西就叫做后门</li>
</ol>
<h3 id="免杀"><a href="#免杀" class="headerlink" title="免杀"></a>免杀</h3><ol>
<li>核心</li>
<li>网站大多数集合了一些防护杀毒，免杀就是隐藏，不被杀毒检测到，隐藏起来</li>
</ol>
<h2 id="web"><a href="#web" class="headerlink" title="web"></a>web</h2><h3 id="组成架构模型"><a href="#组成架构模型" class="headerlink" title="组成架构模型"></a>组成架构模型</h3><ol>
<li>网站源码：脚本类型(java反序列化，php上传漏洞)、分应用方向（方向不同，函数不同，漏洞也就不同）</li>
<li>服务器操作系统：windows,linux（系统不同，命令不同，登录服务器的方式不同）</li>
<li>中间件（搭建平台）:apache lis tomcat nginx （提供服务的，网站除了网站源码，还需要运行网站源码）</li>
<li>数据库:access mysql oracle db2 postsql（储存数据）</li>
</ol>
<h2 id="漏洞类型"><a href="#漏洞类型" class="headerlink" title="漏洞类型"></a>漏洞类型</h2><h3 id="web源码对应漏洞"><a href="#web源码对应漏洞" class="headerlink" title="web源码对应漏洞"></a>web源码对应漏洞</h3><ol>
<li>sql注入</li>
<li>文件上传</li>
<li>xss</li>
<li>代码执行</li>
<li>变量覆盖</li>
<li>逻辑漏洞</li>
<li>反序列化</li>
</ol>
<h3 id="web中间件漏洞"><a href="#web中间件漏洞" class="headerlink" title="web中间件漏洞"></a>web中间件漏洞</h3><h3 id="web数据库对应漏洞"><a href="#web数据库对应漏洞" class="headerlink" title="web数据库对应漏洞"></a>web数据库对应漏洞</h3><h3 id="web系统层漏洞"><a href="#web系统层漏洞" class="headerlink" title="web系统层漏洞"></a>web系统层漏洞</h3><h3 id="第三方对应漏洞"><a href="#第三方对应漏洞" class="headerlink" title="第三方对应漏洞"></a>第三方对应漏洞</h3><h2 id="实操"><a href="#实操" class="headerlink" title="实操"></a>实操</h2><h3 id="多级域名枚举查找"><a href="#多级域名枚举查找" class="headerlink" title="多级域名枚举查找"></a>多级域名枚举查找</h3><ol>
<li>使用浏览器查找（爬）：输入一级域名，自动查找匹配二级域名，例如：搜索baidu.com,会自动匹配<a target="_blank" rel="noopener" href="http://www.baidu.com和vip.baidu.com等/">www.baidu.com和vip.baidu.com等</a></li>
<li>子域名爆破（<strong>layer子域名挖掘机</strong>）的字典是前缀，所以爆破的时候需要删除二级域名，只保留已经确定的一级域名</li>
<li>注意：御剑跑的是后缀，而不是前缀</li>
</ol>
<h1 id="CDN绕过"><a href="#CDN绕过" class="headerlink" title="CDN绕过"></a>CDN绕过</h1><h2 id="主要用于信息搜集"><a href="#主要用于信息搜集" class="headerlink" title="主要用于信息搜集"></a>主要用于信息搜集</h2><h2 id="初衷"><a href="#初衷" class="headerlink" title="初衷"></a>初衷</h2><ol>
<li>提升网络速度</li>
<li>cdn服务</li>
<li>但是cdn需要花钱，所以按需来，不是每一个网站都有cdn服务，开得越多，成本越大</li>
</ol>
<h2 id="cdn原理"><a href="#cdn原理" class="headerlink" title="cdn原理"></a>cdn原理</h2><ol>
<li>从网上下载东文件，为了下一个访问者下载更快，上一个访问者下载之后，会在本地运营商的服务器中留缓存，下一个访问者下载时，会优先在这个服务器中的缓存中下载</li>
<li>分配缓存实际是分配节点，会就近分配一个节点给用户</li>
<li>和互联网的缓存原理相同，访问时会优先本地请求</li>
<li><strong>但是缓存不是实时更新的</strong></li>
<li>渗透测试时可能操作的是cdn缓存，而不是真正的目标</li>
</ol>
<h2 id="如何判定目标存在CDN服务"><a href="#如何判定目标存在CDN服务" class="headerlink" title="如何判定目标存在CDN服务"></a>如何判定目标存在CDN服务</h2><ol>
<li>利用网站超级ping（<strong>多个地点ping服务</strong>）（利用<strong>海外和国内多个服务器</strong>对目标网站进行<strong>ping</strong>的操作，根据IP地址的<strong>回显</strong>来判断是否有cdn）</li>
<li><strong><a target="_blank" rel="noopener" href="https://ping.chinaz.com/">https://ping.chinaz.com/</a></strong></li>
<li>如果一个网站出现两个IP，就开启了ｃｄｎ服务</li>
</ol>
<h2 id="常见CDN绕过技术"><a href="#常见CDN绕过技术" class="headerlink" title="常见CDN绕过技术"></a>常见CDN绕过技术</h2><h3 id="子域名查询"><a href="#子域名查询" class="headerlink" title="子域名查询"></a>子域名查询</h3><ol>
<li>有可能子域名和主域名不在一个服务器上</li>
<li>一种可能是和主站放在一起（同一个IP地址）</li>
<li>还有一个可能是放在同一网段下，不同主机下（网络号相同，但是主机号不同）</li>
<li>或在不同网段<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3></li>
<li>为了节约成本，站长可能会对访问量较大的网站做cdn服务</li>
<li>对那些小的子网站不做cdn服务</li>
</ol>
<h3 id="邮件服务查询"><a href="#邮件服务查询" class="headerlink" title="邮件服务查询"></a>邮件服务查询</h3><ol>
<li>邮件服务器</li>
<li>对方把邮件发给你，如果有cdn服务时，自己访问邮箱地址的时候是就近安排节点</li>
<li>但是对方给你发邮件的时候，不会走cdn，随便找个cdn服务器发送</li>
</ol>
<h3 id="国外地址请求"><a href="#国外地址请求" class="headerlink" title="国外地址请求"></a>国外地址请求</h3><h3 id="遗留文件，扫描全网"><a href="#遗留文件，扫描全网" class="headerlink" title="遗留文件，扫描全网"></a>遗留文件，扫描全网</h3><ol>
<li>遗留文件就是phpinfo</li>
</ol>
<h3 id="黑暗引擎搜索特定文件"><a href="#黑暗引擎搜索特定文件" class="headerlink" title="黑暗引擎搜索特定文件"></a>黑暗引擎搜索特定文件</h3><ol>
<li>shodan   撒旦</li>
<li>fofa   </li>
<li>zoomeye   钟馗之眼<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4></li>
<li>另类的搜索引擎，利用这个黑暗引擎可以搜索到不常见的东西</li>
<li>这些搜索引擎会定期把网上一些深层次的东西爬到数据库中</li>
<li>这些数据库中的东西就是实时的（延时低）</li>
</ol>
<h3 id="dns历史记录，以量打量"><a href="#dns历史记录，以量打量" class="headerlink" title="dns历史记录，以量打量"></a>dns历史记录，以量打量</h3>
    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/CTF/">#CTF</a> <a href="/tags/ing/">#ing</a>
        </div>
    

    <!-- Comments -->
    
    <div class="comments">
        
<div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>



    </div>
    

</div>
        </section>

    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    拒绝划水，拒绝摸鱼
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2023%E5%A4%8D%E7%9B%98/">2023复盘</a>
            </li>
            
            <li>
                <a class="footer-post" href="/%E4%BE%A7%E4%BF%A1%E9%81%93%E6%94%BB%E5%87%BB/">侧信道攻击</a>
            </li>
            
            <li>
                <a class="footer-post" href="/%E8%93%9D%E5%B8%BD%E6%9D%AF%E5%8D%8A%E5%86%B3%E8%B5%9B_%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/">蓝帽杯半决赛wp_电子取证部分</a>
            </li>
            
            <li>
                <a class="footer-post" href="/%E8%93%9D%E5%B8%BD%E6%9D%AF%E5%8D%8A%E5%86%B3%E8%B5%9B_web/">蓝帽杯半决赛wp_web部分</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/CSS/">CSS</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/CSS/ing/">ing</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Hadoop/">Hadoop</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/ing/">ing</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/dezhoutorizhao/blog6">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/dezhoutorizhao/blog6">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/dezhoutorizhao/blog6">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/dezhoutorizhao/blog6">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/dezhoutorizhao/blog6">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="http://dezhoutorizhao.github.io/blog6/">
                            <span class="footer-icon-container">
                                <i class="fa fa-telegram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="http://dezhoutorizhao.github.io/blog6/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="http://dezhoutorizhao.github.io/blog6/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:a18888200398@163.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a target="_blank" rel="noopener" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->

<script src="/js/main.js"></script>


<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'klugjotest';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>

</html>